@startuml 
skinparam sequenceArrowThickness 2 
skinparam roundcorner 20 
skinparam maxmessagesize 60 
skinparam sequenceParticipant underline

actor Leadactor Twilio APIactor User Agent
participant "Call Recordings" as 09
participant "Lead customer profile" as 19
participant "Lead/customer with agent mapping" as 29
participant "TwilioAPI" as 39
participant "1800dialbutton" as 69
participant "calls" as 99
participant "Call logs" as 109

Lead -> 09: incomecallpopup()
activate 09

09 -> 99: answerphonecall()
activate 99

99 -> 39: TwilioAPI()
activate 39

39 -> 19: popupincomecallandcustomersnumber()
activate 19

19 -> 09: incomecallpopup()
09 -> 99: answerphonecall()
99 -> 109: calllog()
activate 109

deactivate 109

deactivate 99

deactivate 09

deactivate 19

39 -> 29: popupincomecallanduseragentnumber()
activate 29

29 -> 99: callernumber()
activate 99

99 -> 19: customer()
activate 19

deactivate 19

99 -> 99: answerphonecall()
99 -> 39: TwilioAPI()
39 -> 19: popupincomecallandcustomersnumber()
activate 19

deactivate 19

39 -> 29: popupincomecallanduseragentnumber()
deactivate 29

deactivate 39

deactivate 99

Twilio API -> 19: popupincomecallandcustomersnumber()
activate 19

deactivate 19

Twilio API -> 29: popupincomecallanduseragentnumber()
activate 29

deactivate 29

User Agent -> 69: callautodialerbutton()
activate 69

69 -> 39: dialwithTwilioAPI()
activate 39

39 -> 39: TwilioAPI()
39 -> 19: popupincomecallandcustomersnumber()
activate 19

deactivate 19

39 -> 29: popupincomecallanduseragentnumber()
activate 29

deactivate 29

deactivate 39

deactivate 69

User Agent -> 09: incomecallpopup()
activate 09

09 -> 99: answerphonecall()
activate 99

deactivate 99

deactivate 09

@enduml